{"ast":null,"code":"var _jsxFileName = \"/Users/minos/Documents/git/Practice/React/hello-react/src/pages/NewCalendarCell.js\";\nimport React, { useState, useEffect } from 'react';\nimport 'sass/app.css';\nimport { editDate } from 'js/containers/components/UserDataController';\nimport { useAddFormState } from 'js/stores/addFormState';\nimport { useErrorState } from 'js/stores/errorState';\nimport { useUserData } from 'js/stores/userData';\nimport { useDragAndDrop } from 'js/stores/dragAndDrop';\n\nconst NewCalendarCell = props => {\n  const {\n    date,\n    schedule\n  } = props;\n  const [addFormState, setAddFormState] = useAddFormState();\n  const {\n    active\n  } = addFormState;\n  const [errorState, setErrorState] = useErrorState();\n  const [userData, setUserData] = useUserData();\n  const [dragAndDrop, setDragAndDrop] = useDragAndDrop();\n  const [curDateStr, setCurDateStr] = useState('');\n  useEffect(() => {\n    let newCurDateStr = date.getDate();\n\n    if (schedule.length !== 0) {\n      newCurDateStr += ' (' + schedule.length + ')';\n    }\n\n    setCurDateStr(newCurDateStr);\n  }, [schedule]);\n\n  const onClickDate = () => {\n    if (!active) {\n      const startHour = new Date().getHours();\n      setAddFormState({ ...addFormState,\n        active: true,\n        mode: 'add',\n        title: '',\n        curDate: date,\n        startHour: startHour,\n        endHour: startHour + 1\n      });\n    }\n  };\n\n  const onClickSchedule = (e, schedule) => {\n    e.stopPropagation();\n    const {\n      title,\n      curDate,\n      startHour,\n      endHour\n    } = schedule;\n\n    if (!active) {\n      setAddFormState({ ...addFormState,\n        active: true,\n        mode: 'edit',\n        title: title,\n        curDate: curDate,\n        startHour: startHour,\n        endHour: endHour\n      });\n    }\n  };\n\n  const onDropSchedule = e => {\n    const newSchedule = editDate(dragAndDrop.to, dragAndDrop.from, userData.schedule);\n\n    if (newSchedule !== false) {\n      setUserData({ ...userData,\n        schedule: newSchedule\n      });\n      setAddFormState({ ...addFormState,\n        active: false\n      });\n      setErrorState({ ...errorState,\n        active: true,\n        mode: 'edit',\n        message: [['일정이 수정 되었습니다.']]\n      });\n    } else {\n      setErrorState({ ...errorState,\n        active: true,\n        mode: 'fail',\n        message: [['일정을 수정할 수 없습니다.'], ['해당 시간에 이미 다른 일정이 존재합니다.']]\n      });\n    }\n  };\n\n  const onDragCell = (e, schedule) => {\n    setDragAndDrop({ ...dragAndDrop,\n      from: schedule\n    });\n  };\n\n  const onDragEnterCell = e => {\n    const {\n      title,\n      startHour,\n      endHour\n    } = dragAndDrop.from;\n    const newScheduleForm = {\n      title: title,\n      curDate: date,\n      startHour: startHour,\n      endHour: endHour\n    };\n    setDragAndDrop({ ...dragAndDrop,\n      to: newScheduleForm\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"monthly-cell\",\n    onClick: onClickDate,\n    onDragEnter: onDragEnterCell,\n    onDragEnd: onDropSchedule,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, curDateStr), schedule.map((a, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"monthly-schedule\",\n    onClick: e => onClickSchedule(e, a),\n    draggable: true,\n    onDragStart: e => onDragCell(e, a),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, a.startHour + '시 ~ ' + a.endHour + '시'), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, a.title))));\n};\n\nexport default NewCalendarCell;","map":{"version":3,"sources":["/Users/minos/Documents/git/Practice/React/hello-react/src/pages/NewCalendarCell.js"],"names":["React","useState","useEffect","editDate","useAddFormState","useErrorState","useUserData","useDragAndDrop","NewCalendarCell","props","date","schedule","addFormState","setAddFormState","active","errorState","setErrorState","userData","setUserData","dragAndDrop","setDragAndDrop","curDateStr","setCurDateStr","newCurDateStr","getDate","length","onClickDate","startHour","Date","getHours","mode","title","curDate","endHour","onClickSchedule","e","stopPropagation","onDropSchedule","newSchedule","to","from","message","onDragCell","onDragEnterCell","newScheduleForm","map","a","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'sass/app.css';\nimport { editDate } from 'js/containers/components/UserDataController';\nimport { useAddFormState } from 'js/stores/addFormState';\nimport { useErrorState } from 'js/stores/errorState';\nimport { useUserData } from 'js/stores/userData';\nimport { useDragAndDrop } from 'js/stores/dragAndDrop';\n\nconst NewCalendarCell = (props) => {\n    const { date, schedule } = props;\n    const [addFormState, setAddFormState] = useAddFormState();\n    const { active } = addFormState;\n    const [errorState, setErrorState] = useErrorState();\n    const [userData, setUserData] = useUserData();\n    const [dragAndDrop, setDragAndDrop] = useDragAndDrop();\n    const [curDateStr, setCurDateStr] = useState('');\n\n    useEffect(\n        () => {\n            let newCurDateStr = date.getDate();\n            if (schedule.length !== 0) {\n                newCurDateStr += ' (' + schedule.length + ')';\n            }\n            setCurDateStr(newCurDateStr);\n        },\n        [schedule]\n    );\n\n    const onClickDate = () => {\n        if (!active) {\n            const startHour = new Date().getHours();\n            setAddFormState({\n                ...addFormState,\n                active: true,\n                mode: 'add',\n                title: '',\n                curDate: date,\n                startHour: startHour,\n                endHour: startHour + 1\n            });\n        }\n    };\n\n    const onClickSchedule = (e, schedule) => {\n        e.stopPropagation();\n        const { title, curDate, startHour, endHour } = schedule;\n\n        if (!active) {\n            setAddFormState({\n                ...addFormState,\n                active: true,\n                mode: 'edit',\n                title: title,\n                curDate: curDate,\n                startHour: startHour,\n                endHour: endHour\n            });\n        }\n    };\n\n    const onDropSchedule = (e) => {\n        const newSchedule = editDate(dragAndDrop.to, dragAndDrop.from, userData.schedule);\n\n        if (newSchedule !== false) {\n            setUserData({ ...userData, schedule: newSchedule });\n            setAddFormState({ ...addFormState, active: false });\n            setErrorState({\n                ...errorState,\n                active: true,\n                mode: 'edit',\n                message: [['일정이 수정 되었습니다.']]\n            });\n        } else {\n            setErrorState({\n                ...errorState,\n                active: true,\n                mode: 'fail',\n                message: [['일정을 수정할 수 없습니다.'], ['해당 시간에 이미 다른 일정이 존재합니다.']]\n            });\n        }\n    };\n\n    const onDragCell = (e, schedule) => {\n        setDragAndDrop({ ...dragAndDrop, from: schedule });\n    };\n\n    const onDragEnterCell = (e) => {\n        const { title, startHour, endHour } = dragAndDrop.from;\n        const newScheduleForm = { title: title, curDate: date, startHour: startHour, endHour: endHour };\n        setDragAndDrop({ ...dragAndDrop, to: newScheduleForm });\n    };\n\n    return (\n        <div className=\"monthly-cell\" onClick={onClickDate} onDragEnter={onDragEnterCell} onDragEnd={onDropSchedule}>\n            <p>{curDateStr}</p>\n\n            {schedule.map((a, i) => (\n                <div\n                    key={i}\n                    className=\"monthly-schedule\"\n                    onClick={(e) => onClickSchedule(e, a)}\n                    draggable\n                    onDragStart={(e) => onDragCell(e, a)}\n                >\n                    <p>{a.startHour + '시 ~ ' + a.endHour + '시'}</p>\n                    <p>{a.title}</p>\n                </div>\n            ))}\n        </div>\n    );\n};\n\nexport default NewCalendarCell;\n"]},"metadata":{},"sourceType":"module"}